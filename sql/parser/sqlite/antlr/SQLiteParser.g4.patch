*** SQLiteParser.g4.new	Fri Jun 30 22:34:08 2023
--- SQLiteParser.g4	Fri Jun 30 22:34:14 2023
***************
*** 47,53 ****
          | attach_stmt
          | begin_stmt
          | commit_stmt
-         | create_database_stmt
          | create_index_stmt
          | create_table_stmt
          | create_trigger_stmt
--- 47,52 ----
***************
*** 56,66 ****
          | delete_stmt
          | delete_stmt_limited
          | detach_stmt
!         | drop_database_stmt
!         | drop_index_stmt
!         | drop_table_stmt
!         | drop_trigger_stmt
!         | drop_view_stmt
          | insert_stmt
          | pragma_stmt
          | reindex_stmt
--- 55,61 ----
          | delete_stmt
          | delete_stmt_limited
          | detach_stmt
!         | drop_stmt
          | insert_stmt
          | pragma_stmt
          | reindex_stmt
***************
*** 115,137 ****
  ;
  
  create_index_stmt:
!     CREATE_ UNIQUE_? INDEX_ (if_not_exists)? (schema_name DOT)? index_name ON_ table_name OPEN_PAR
          indexed_column (COMMA indexed_column)* CLOSE_PAR (WHERE_ expr)?
  ;
  
  indexed_column: (column_name | expr) (COLLATE_ collation_name)? asc_desc?
  ;
  
- create_database_stmt:
-     CREATE_ DATABASE_ (if_not_exists)? database_name
- ;
- 
- if_not_exists:
-     IF_ NOT_ EXISTS_
- ;
- 
  create_table_stmt:
!     CREATE_ (TEMP_ | TEMPORARY_)? TABLE_ (if_not_exists)? (
          schema_name DOT
      )? table_name (
          OPEN_PAR column_def (COMMA column_def)*? (COMMA table_constraint)* CLOSE_PAR (
--- 110,124 ----
  ;
  
  create_index_stmt:
!     CREATE_ UNIQUE_? INDEX_ (IF_ NOT_ EXISTS_)? (schema_name DOT)? index_name ON_ table_name OPEN_PAR
          indexed_column (COMMA indexed_column)* CLOSE_PAR (WHERE_ expr)?
  ;
  
  indexed_column: (column_name | expr) (COLLATE_ collation_name)? asc_desc?
  ;
  
  create_table_stmt:
!     CREATE_ (TEMP_ | TEMPORARY_)? TABLE_ (IF_ NOT_ EXISTS_)? (
          schema_name DOT
      )? table_name (
          OPEN_PAR column_def (COMMA column_def)*? (COMMA table_constraint)* CLOSE_PAR (
***************
*** 153,159 ****
  ;
  
  column_constraint: (CONSTRAINT_ name)? (
!         primary_key_constraint
          | (NOT_? NULL_ | UNIQUE_) conflict_clause?
          | CHECK_ OPEN_PAR expr CLOSE_PAR
          | DEFAULT_ (signed_number | literal_value | OPEN_PAR expr CLOSE_PAR)
--- 140,146 ----
  ;
  
  column_constraint: (CONSTRAINT_ name)? (
!         (PRIMARY_ KEY_ asc_desc? conflict_clause? AUTOINCREMENT_?)
          | (NOT_? NULL_ | UNIQUE_) conflict_clause?
          | CHECK_ OPEN_PAR expr CLOSE_PAR
          | DEFAULT_ (signed_number | literal_value | OPEN_PAR expr CLOSE_PAR)
***************
*** 166,198 ****
      )
  ;
  
- primary_key_constraint:
-     (PRIMARY_ KEY_ asc_desc? conflict_clause? AUTOINCREMENT_?)
- ;
- 
  signed_number: (PLUS | MINUS)? NUMERIC_LITERAL
  ;
  
  table_constraint: (CONSTRAINT_ name)? (
!         primary_key_def
!         | unique_key_def
          | CHECK_ OPEN_PAR expr CLOSE_PAR
          | FOREIGN_ KEY_ OPEN_PAR column_name (COMMA column_name)* CLOSE_PAR foreign_key_clause
      )
  ;
  
- primary_key_def:
-         PRIMARY_ KEY_ OPEN_PAR indexed_column (
-             COMMA indexed_column
-         )* CLOSE_PAR conflict_clause?
- ;
- 
- unique_key_def:
-         UNIQUE_ OPEN_PAR indexed_column (
-             COMMA indexed_column
-         )* CLOSE_PAR conflict_clause?
- ;
- 
  foreign_key_clause:
      REFERENCES_ foreign_table (
          OPEN_PAR column_name (COMMA column_name)* CLOSE_PAR
--- 153,170 ----
      )
  ;
  
  signed_number: (PLUS | MINUS)? NUMERIC_LITERAL
  ;
  
  table_constraint: (CONSTRAINT_ name)? (
!         (PRIMARY_ KEY_ | UNIQUE_) OPEN_PAR indexed_column (
!             COMMA indexed_column
!         )* CLOSE_PAR conflict_clause?
          | CHECK_ OPEN_PAR expr CLOSE_PAR
          | FOREIGN_ KEY_ OPEN_PAR column_name (COMMA column_name)* CLOSE_PAR foreign_key_clause
      )
  ;
  
  foreign_key_clause:
      REFERENCES_ foreign_table (
          OPEN_PAR column_name (COMMA column_name)* CLOSE_PAR
***************
*** 218,224 ****
  ;
  
  create_trigger_stmt:
!     CREATE_ (TEMP_ | TEMPORARY_)? TRIGGER_ (if_not_exists)? (
          schema_name DOT
      )? trigger_name (BEFORE_ | AFTER_ | INSTEAD_ OF_)? (
          DELETE_
--- 190,196 ----
  ;
  
  create_trigger_stmt:
!     CREATE_ (TEMP_ | TEMPORARY_)? TRIGGER_ (IF_ NOT_ EXISTS_)? (
          schema_name DOT
      )? trigger_name (BEFORE_ | AFTER_ | INSTEAD_ OF_)? (
          DELETE_
***************
*** 230,242 ****
  ;
  
  create_view_stmt:
!     CREATE_ (TEMP_ | TEMPORARY_)? VIEW_ (if_not_exists)? (
          schema_name DOT
      )? view_name (OPEN_PAR column_name (COMMA column_name)* CLOSE_PAR)? AS_ select_stmt
  ;
  
  create_virtual_table_stmt:
!     CREATE_ VIRTUAL_ TABLE_ (if_not_exists)? (schema_name DOT)? table_name USING_ module_name (
          OPEN_PAR module_argument (COMMA module_argument)* CLOSE_PAR
      )?
  ;
--- 202,214 ----
  ;
  
  create_view_stmt:
!     CREATE_ (TEMP_ | TEMPORARY_)? VIEW_ (IF_ NOT_ EXISTS_)? (
          schema_name DOT
      )? view_name (OPEN_PAR column_name (COMMA column_name)* CLOSE_PAR)? AS_ select_stmt
  ;
  
  create_virtual_table_stmt:
!     CREATE_ VIRTUAL_ TABLE_ (IF_ NOT_ EXISTS_)? (schema_name DOT)? table_name USING_ module_name (
          OPEN_PAR module_argument (COMMA module_argument)* CLOSE_PAR
      )?
  ;
***************
*** 275,318 ****
  
  drop_stmt:
      DROP_ object = (INDEX_ | TABLE_ | TRIGGER_ | VIEW_) (
!         if_exists
      )? (schema_name DOT)? any_name
  ;
  
- drop_database_stmt:
-     DROP_  DATABASE_ (
-         if_exists
-     )? database_name
- ;
- 
- drop_index_stmt:
-     DROP_  INDEX_ (
-         if_exists
-     )? (schema_name DOT)? index_name
- ;
- 
- drop_table_stmt:
-     DROP_  TABLE_ (
-         if_exists
-     )? (schema_name DOT)? table_name
- ;
- 
- drop_trigger_stmt:
-     DROP_  TRIGGER_ (
-         if_exists
-     )? (schema_name DOT)? trigger_name
- ;
- 
- drop_view_stmt:
-     DROP_  VIEW_ (
-         if_exists
-     )? (schema_name DOT)? view_name
- ;
- 
- if_exists:
-     IF_ NOT_ EXISTS_
- ;
- 
  /*
   SQLite understands the following binary operators, in order from highest to lowest precedence:
      ||
--- 247,256 ----
  
  drop_stmt:
      DROP_ object = (INDEX_ | TABLE_ | TRIGGER_ | VIEW_) (
!         IF_ EXISTS_
      )? (schema_name DOT)? any_name
  ;
  
  /*
   SQLite understands the following binary operators, in order from highest to lowest precedence:
      ||
***************
*** 333,341 ****
      | expr ( STAR | DIV | MOD) expr
      | expr ( PLUS | MINUS) expr
      | expr ( LT2 | GT2 | AMP | PIPE) expr
!     | comparison_expr 
      | expr (
          ASSIGN
          | IS_
          | IS_ NOT_
          | IN_
--- 271,282 ----
      | expr ( STAR | DIV | MOD) expr
      | expr ( PLUS | MINUS) expr
      | expr ( LT2 | GT2 | AMP | PIPE) expr
!     | expr ( LT | LT_EQ | GT | GT_EQ) expr
      | expr (
          ASSIGN
+         | EQ
+         | NOT_EQ1
+         | NOT_EQ2
          | IS_
          | IS_ NOT_
          | IN_
***************
*** 366,375 ****
      | raise_function
  ;
  
- comparison_expr:
-     column_name (EQ | NOT_EQ1 | NOT_EQ2 | LT | LT_EQ | GT | GT_EQ) literal_value
- ;
- 
  raise_function:
      RAISE_ OPEN_PAR (
          IGNORE_
--- 307,312 ----
***************
*** 453,459 ****
  ;
  
  select_stmt:
!     common_table_stmt? parentQuery=select_core (compound_operator select_core)* order_by_stmt? limit_stmt?
  ;
  
  join_clause:
--- 390,396 ----
  ;
  
  select_stmt:
!     common_table_stmt? select_core (compound_operator select_core)* order_by_stmt? limit_stmt?
  ;
  
  join_clause:
***************
*** 463,469 ****
  select_core:
      (
          SELECT_ (DISTINCT_ | ALL_)? result_column (COMMA result_column)* (
!             FROM_ (from (COMMA from)* | join_clause)
          )? (WHERE_ whereExpr=expr)? (
            GROUP_ BY_ groupByExpr+=expr (COMMA groupByExpr+=expr)* (
                HAVING_ havingExpr=expr
--- 400,406 ----
  select_core:
      (
          SELECT_ (DISTINCT_ | ALL_)? result_column (COMMA result_column)* (
!             FROM_ (table_or_subquery (COMMA table_or_subquery)* | join_clause)
          )? (WHERE_ whereExpr=expr)? (
            GROUP_ BY_ groupByExpr+=expr (COMMA groupByExpr+=expr)* (
                HAVING_ havingExpr=expr
***************
*** 490,523 ****
      )+ order_by_stmt? limit_stmt?
  ;
  
- from:
-     from_table
-     | from_function
-     | from_select
-     | from_table_or_subquery
- ;
- 
- from_table: 
-     (schema_name DOT)? table_name (AS_? table_alias)? (
-         INDEXED_ BY_ index_name
-         | NOT_ INDEXED_
-     )?
- ;
- 
- from_function:
-     (schema_name DOT)? table_function_name OPEN_PAR expr (COMMA expr)* CLOSE_PAR (
-         AS_? table_alias
-     )?
- ;
- 
- from_table_or_subquery:
-     OPEN_PAR (table_or_subquery (COMMA table_or_subquery)* | join_clause) CLOSE_PAR
- ;
- 
- from_select:
-     OPEN_PAR select_stmt CLOSE_PAR (AS_? table_alias)?
- ;
- 
  table_or_subquery: (
          (schema_name DOT)? table_name (AS_? table_alias)? (
              INDEXED_ BY_ index_name
--- 427,432 ----
***************
*** 907,916 ****
  // TODO: check all names below
  
  name:
-     any_name
- ;
- 
- database_name:
      any_name
  ;
  
--- 816,821 ----
